# Реализация серверной части приложения средствами django и djangorestframework в соответствии с заданием из текста работы.
Описание моего варианта
Создать программную систему, предназначенную для управления договорами
страхования с физическими лицами и юридическими организациями.
Страховая организация заключает договоры. Для организации оформляется
коллективный договор, в котором перечислены страхуемые сотрудники: ФИО, возраст,
категория риска (первая, вторая, высшая и т.п.). О предприятии хранится следующая
информация: код, полное наименование, краткое наименование, адрес, банковские
реквизиты (номер банка), специализация предприятия (медицинское учреждение,
автотранспортное предприятие, учебное заведение и т.п.). В заключаемом коллективном
договоре указывается дата заключения, срок договора (начало и конец действия договора),
сумма выплат по каждой категории сотрудников, выплаты по страховым случаям.
Выплаты зависят от категории сотрудника. Необходимо также хранить информацию о
страховом агенте, заключившем договор (ФИО, паспортные данные, контактные данные).
Каждый агент может заключить много договоров, в каждом договоре может быть
оформлено несколько сотрудников. С физическим лицом заключается индивидуальный
договор. Каждый конкретный договор может быть заключен только одним агентом.
При возникновении страхового случая необходима информация о его дате,
причине, решении о выплате страховой суммы и размере выплаты.
Директор компании должен иметь возможность принять и уволить на работу
страхового агента. Поэтому должна сохраняться информация о заключенных с ними
трудовых договорах.
Перечень возможных запросов:


1. Для заданной организации вывести список других организаций,
застрахованных теми же агентами, что и заданная, для действующих
договоров.
2. Для каждого агента вывести количество заключенных им договоров каждого
типа за определенный период времени.
3. Для заданной персоны вывести список застрахованных сотрудников в одном
коллективном договоре для действующих коллективных договоров.
4. Вывести общую сумму выплат по каждому типу договоров при возникших
страховых случаях за заданный период времени.
5. Для каждого юридического лица вывести реквизиты договора и общую сумму
выплат по всем категориям сотрудников.

Стек реализации

    Язык: Python
    фреймворк : Django, DRF

# Документация к сериализаторам

## InsuranceAgentSerializer
Этот класс используется для сериализации модели `InsuranceAgent`. Он преобразует данные модели в формат JSON и обратно.

### Поля:
- `model`: указывает на модель `InsuranceAgent`.
- `fields`: включает все поля модели.

## OrganizationSerializer
Сериализатор для модели `Organization`. Используется для преобразования данных модели в формат JSON и обратно.

### Поля:
- `model`: модель `Organization`.
- `fields`: включает все поля модели.

## EmployeeSerializer
Этот сериализатор отвечает за преобразование данных модели `Employee` в формат JSON и обратно.

### Поля:
- `model`: модель `Employee`.
- `fields`: включает все поля модели.

## CollectiveContractSerializer
Сериализатор для модели `CollectiveContract`. Он используется для преобразования всех данных модели.

### Поля:
- `model`: модель `CollectiveContract`.
- `fields`: включает все поля модели.

## InsuranceCaseSerializer
Сериализатор для работы с моделью `InsuranceCase`. Предназначен для преобразования данных модели.

### Поля:
- `model`: модель `InsuranceCase`.
- `fields`: включает все поля модели.

## EmploymentContractSerializer
Сериализатор для модели `EmploymentContract`. Этот класс включает данные об агенте страхования с использованием вложенного сериализатора.

### Поля:
- `model`: модель `EmploymentContract`.
- `fields`: включает все поля модели.
- `insurance_agent`: сериализатор для агента страхования, только для чтения.

## Djoser

метод POST
создания пользователя 
http://127.0.0.1:8000/auth/users/

Метод POST
Получение токена
http://127.0.0.1:8000/auth/token/login

Метов GET
Получение пользователя по токену
http://127.0.0.1:8000/auth/users/me/

## Аналитические запросы
1 Для заданной организации вывести список других организаций,
застрахованных теми же агентами, что и заданная, для действующих
договоров.

GET /organizations/{id}/related_organizations/
![img.png](img.png)
2 Для каждого агента вывести количество заключенных им договоров каждого
типа за определенный период времени.

GET /collective-contracts/agent_contracts_count/
![img_1.png](img_1.png)
![img_2.png](img_2.png)

3 Для заданной персоны вывести список застрахованных сотрудников в одном
коллективном договоре для действующих коллективных договоров.
GET /collective-contracts/{id}/insured_employees/
![img_3.png](img_3.png)
4 Вывести общую сумму выплат по каждому типу договоров при возникших
страховых случаях за заданный период времени.

GET /insurance-cases/total_payouts/
![img_4.png](img_4.png)

5 Для каждого юридического лица вывести реквизиты договора и общую сумму
выплат по всем категориям сотрудников.
GET /organizations/{id}/contract_details_and_payouts/

![img_5.png](img_5.png)